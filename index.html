<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambios Yireh | Calculadora Multidireccional</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --naranja: #e67e22; --naranja-dark: #d35400; --azul: #2c3e50; --gris-fondo: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--gris-fondo); margin: 0; padding: 0; color: #333; }
        header { background: var(--naranja); color: white; padding: 25px 10px; border-bottom: 5px solid var(--naranja-dark); text-align: center; }
        .logo { max-width: 140px; margin-bottom: 5px; }
        .horario { font-size: 13px; background: rgba(0,0,0,0.15); display: inline-block; padding: 5px 15px; border-radius: 20px; margin-top: 5px; }
        .container { max-width: 600px; margin: 20px auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        h3 { color: var(--azul); border-left: 4px solid var(--naranja); padding-left: 10px; margin: 25px 0 15px; text-align: left; }
        label { font-weight: bold; display: block; margin: 10px 0 5px; text-align: left; font-size: 14px; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; margin-bottom: 10px; box-sizing: border-box; }
        .resultado-caja { background: #fff9f4; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid var(--naranja); text-align: center; }
        .resultado-monto { font-size: 30px; font-weight: 800; color: var(--naranja); display: block; }
        .btn-whatsapp { background: #27ae60; color: white; padding: 18px; border-radius: 8px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; text-decoration: none; border: none; }
        .error-msg { color: #e74c3c; font-size: 12px; font-weight: bold; text-align: left; display: none; margin-bottom: 10px; }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Cambios Yireh" class="logo">
    <br><i>"Tu puente de confianza, tu dinero al instante."</i><br>
    <div class="horario"><b>Horario VEN:</b> Lun-Vie 9am-7pm | SÃ¡b 9am-5pm</div>
</header>

<div class="container">
    <h3>1. Calculadora Global</h3>
    
    <label>Vendedor:</label>
    <select id="vendedor">
        <option value="56957326594|Y40">Y40 Nay MartÃ­nez</option>
        <option value="56974967341|Y32">Y32 JosÃ© MillÃ¡n</option>
        <option value="584120628361|Y17">Y17 Alba ArÃ©valo</option>
    </select>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div>
            <label>Desde:</label>
            <select id="origen" onchange="calcular()">
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lares (USD)</option>
            </select>
        </div>
        <div>
            <label>Hacia:</label>
            <select id="destino" onchange="calcular()">
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lares (USD)</option>
            </select>
        </div>
    </div>

    <label>Monto a enviar:</label>
    <input type="number" id="monto" placeholder="0.00" oninput="calcular()">

    <div class="resultado-caja">
        <span class="resultado-monto" id="resultado">0.00</span>
        <b id="moneda-final">BolÃ­vares</b>
    </div>

    <h3>2. Datos Bancarios</h3>
    <input type="text" id="nombre" placeholder="Nombre y Apellido">
    <input type="text" id="cedula" placeholder="CÃ©dula / RIF / ID">
    <input type="text" id="banco" placeholder="Banco Receptor">
    <select id="tipo_cuenta" onchange="validarDigitos()">
        <option value="Corriente">Cuenta Corriente (20 dÃ­gitos)</option>
        <option value="Ahorro">Cuenta de Ahorros (20 dÃ­gitos)</option>
        <option value="Pago MÃ³vil">Pago MÃ³vil</option>
    </select>
    <input type="text" id="nro_cuenta" placeholder="NÃºmero de cuenta o telÃ©fono" oninput="validarDigitos()">
    <div id="msg-error-cuenta" class="error-msg">âš ï¸ El nÃºmero de cuenta debe tener exactamente 20 dÃ­gitos.</div>

    <button class="btn-whatsapp" onclick="enviarWhatsApp()">
        <i class="fab fa-whatsapp"></i> ENVIAR AL VENDEDOR
    </button>
</div>

<script>
const matriz = {
    // CHILE ORIGEN
    "CHILE_VENEZUELA": { tasa: 0.487, op: 'm' },
    "CHILE_COLOMBIA": { tasa: 3.6, op: 'm' },
    "CHILE_PERU": { tasa: 0.0033, op: 'm' },
    "CHILE_DOLAR": { tasa: 0.00098, op: 'm' },
    // VENEZUELA ORIGEN
    "VENEZUELA_COLOMBIA": { tasa: 6, op: 'm' },
    "VENEZUELA_PERU": { tasa: 150, op: 'd' },
    "VENEZUELA_CHILE": { tasa: 0.7, op: 'd' },
    "VENEZUELA_DOLAR": { tasa: 635, op: 'd' },
    // COLOMBIA ORIGEN
    "COLOMBIA_VENEZUELA": { tasa: 9.1, op: 'd' }, // CORREGIDO: DIVIDE
    "COLOMBIA_CHILE": { tasa: 0.211, op: 'm' },
    "COLOMBIA_PERU": { tasa: 0.00080, op: 'm' },
    "COLOMBIA_DOLAR": { tasa: 0.237, op: 'm' },
    // PERU ORIGEN
    "PERU_VENEZUELA": { tasa: 126, op: 'm' },
    "PERU_CHILE": { tasa: 235, op: 'm' },
    "PERU_COLOMBIA": { tasa: 960, op: 'm' },
    "PERU_DOLAR": { tasa: 0.262, op: 'm' },
    // DOLAR ORIGEN
    "DOLAR_CHILE": { tasa: 765, op: 'm' },
    "DOLAR_PERU": { tasa: 2.88, op: 'm' },
    "DOLAR_VENEZUELA": { tasa: 365, op: 'm' },
    "DOLAR_COLOMBIA": { tasa: 3160, op: 'm' }
};

function calcular() {
    const monto = parseFloat(document.getElementById('monto').value) || 0;
    const origen = document.getElementById('origen').value;
    const destino = document.getElementById('destino').value;
    const clave = `${origen}_${destino}`;
    document.getElementById('moneda-final').innerText = destino;
    if (origen === destino) { document.getElementById('resultado').innerText = monto.toFixed(2); return; }
    const config = matriz[clave];
    if (config) {
        let total = config.op === 'm' ? monto * config.tasa : monto / config.tasa;
        document.getElementById('resultado').innerText = total.toLocaleString('es-VE', {minimumFractionDigits: 2});
    } else { document.getElementById('resultado').innerText = "Consultar Tasa"; }
}

function validarDigitos() {
    const tipo = document.getElementById('tipo_cuenta').value;
    const cuenta = document.getElementById('nro_cuenta').value.replace(/\D/g, ''); // Solo nÃºmeros
    const errorDiv = document.getElementById('msg-error-cuenta');
    if ((tipo === "Corriente" || tipo === "Ahorro") && cuenta.length > 0) {
        if (cuenta.length !== 20) { errorDiv.style.display = "block"; return false; }
    }
    errorDiv.style.display = "none";
    return true;
}

function enviarWhatsApp() {
    const monto = document.getElementById('monto').value;
    const origen = document.getElementById('origen').value;
    const destino = document.getElementById('destino').value;
    const resultado = document.getElementById('resultado').innerText;
    const nro = document.getElementById('nro_cuenta').value;
    const vendedorData = document.getElementById('vendedor').value.split('|');

    if (!validarDigitos()) { alert("âš ï¸ El nÃºmero de cuenta debe tener exactamente 20 dÃ­gitos."); return; }
    if(!monto || !nro) { alert("âš ï¸ Por favor completa los datos bÃ¡sicos."); return; }

    const mensaje = `*FICHA DE OPERACIÃ“N*%0A--------------------------%0AğŸ‘¤ *Beneficiario:* ${document.getElementById('nombre').value}%0AğŸ†” *ID:* ${document.getElementById('cedula').value}%0AğŸ¦ *Banco:* ${document.getElementById('banco').value}%0AğŸ”¢ *Cuenta:* ${nro}%0A%0A*ğŸ’° RECIBE:* ${resultado} ${destino}%0A*ğŸ’¸ PAGA:* ${monto} ${origen}%0A*ğŸ¤ VENDEDOR:* ${vendedorData[1]}`;
    window.open(`https://wa.me/${vendedorData[0]}?text=${mensaje}`, '_blank');
}
</script>
</body>
</html>
