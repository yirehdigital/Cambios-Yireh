<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambios Yireh | Calculadora Global</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --naranja: #e67e22; --naranja-dark: #d35400; --azul: #2c3e50; --gris: #f4f7f6; --rojo: #c0392b; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--gris); margin: 0; text-align: center; }
        header { background: var(--naranja); color: white; padding: 25px; border-bottom: 5px solid var(--naranja-dark); }
        .logo { max-width: 150px; margin-bottom: 5px; }
        .container { max-width: 600px; margin: 20px auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        label { font-weight: bold; display: block; margin: 15px 0 5px; text-align: left; }
        
        /* Selectores con mejor aspecto visual */
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; margin-bottom: 10px; box-sizing: border-box; background: white; }
        
        .resultado-caja { background: #fff9f4; padding: 20px; border-radius: 10px; border: 2px solid var(--naranja); margin: 20px 0; }
        .resultado-monto { font-size: 34px; font-weight: 800; color: var(--naranja); display: block; }
        
        .alerta-seguridad { background: #fdf2f2; border: 1px solid #f5c6cb; color: var(--rojo); padding: 12px; border-radius: 8px; font-size: 13px; text-align: left; margin-bottom: 15px; display: flex; gap: 10px; align-items: center; }
        
        .btn-whatsapp { background: #27ae60; color: white; padding: 18px; border-radius: 8px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; text-decoration: none; border: none; opacity: 0.3; pointer-events: none; transition: 0.3s; }
        .btn-active { opacity: 1 !important; pointer-events: auto !important; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); }
        
        .footer-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; max-width: 1000px; margin: 20px auto; padding: 10px; }
        .card { background: white; padding: 20px; border-radius: 12px; border-top: 4px solid var(--naranja); box-shadow: 0 4px 6px rgba(0,0,0,0.05); text-align: left; font-size: 13px; }
        .error-hint { color: var(--rojo); font-size: 12px; text-align: left; font-weight: bold; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Cambios Yireh" class="logo">
    <p>"Tu puente de confianza, tu dinero al instante."</p>
</header>

<div class="container">
    <label><i class="fas fa-user-tie"></i> Vendedor de confianza:</label>
    <select id="vendedor">
        <option value="56957326594|Y40">Y40 Nay MartÃ­nez</option>
        <option value="56974967341|Y32">Y32 JosÃ© MillÃ¡n</option>
        <option value="5841220628361|Y17">Y17 Alba ArÃ©valo</option>
    </select>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div>
            <label>Desde (Tengo):</label>
            <select id="origen" onchange="calcular()">
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ EEUU (USD)</option>
            </select>
        </div>
        <div>
            <label>Hacia (Quiero):</label>
            <select id="destino" onchange="ajustarCampos()">
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="ARGENTINA">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                <option value="MEXICO">ğŸ‡²ğŸ‡½ MÃ©xico (MXN)</option>
                <option value="PANAMA">ğŸ‡µğŸ‡¦ PanamÃ¡ (USD)</option>
                <option value="ECUADOR">ğŸ‡ªğŸ‡¨ Ecuador (USD)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lares (USD)</option>
            </select>
        </div>
    </div>

    <label>Monto a enviar:</label>
    <input type="number" id="monto" placeholder="Ej: 5000" oninput="calcular()">

    <div class="resultado-caja">
        <span id="label-res" style="color:#7f8c8d; font-size:12px; font-weight:bold; text-transform:uppercase;">Recibes aproximadamente</span>
        <span class="resultado-monto" id="resultado">0.00</span>
        <b id="moneda-text" style="color:var(--azul)">BOLÃVARES</b>
    </div>

    <h3>Datos del Receptor</h3>
    <input type="text" id="nombre" placeholder="Nombre y Apellido">
    <input type="text" id="cedula" placeholder="CÃ©dula / ID">
    <input type="text" id="banco" placeholder="Banco">
    
    <div id="wrapper-tipo">
        <label>Tipo de Cuenta:</label>
        <select id="tipo_cuenta" onchange="validar()">
            <option value="Corriente">Cuenta Corriente (20 dÃ­gitos)</option>
            <option value="Ahorro">Cuenta de Ahorro (20 dÃ­gitos)</option>
            <option value="Pago MÃ³vil">Pago MÃ³vil (11 dÃ­gitos)</option>
        </select>
    </div>

    <input type="text" id="nro_cuenta" placeholder="NÃºmero de cuenta o telÃ©fono" oninput="validar()">
    <span id="hint" class="error-hint"></span>

    <div class="alerta-seguridad">
        <i class="fas fa-shield-alt"></i>
        <span><b>SISTEMA DE SEGURIDAD:</b> Todo pago se verifica en la cuenta bancaria. No aceptamos comprobantes falsos o editados.</span>
    </div>

    <div style="background: #fff4e5; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; text-align: left; border: 1px solid var(--naranja);">
        <input type="checkbox" id="comprobante" onchange="validar()"> 
        <b>ConfirmaciÃ³n:</b> Entiendo que la operaciÃ³n se procesa tras confirmar el dinero en cuenta.
    </div>

    <button id="btn-wa" class="btn-whatsapp" onclick="enviar()">
        <i class="fab fa-whatsapp"></i> CONFIRMAR OPERACIÃ“N
    </button>
</div>

<div class="footer-cards">
    <div class="card">
        <h4>ğŸ‡»ğŸ‡ª Venezuela & ğŸ‡¨ğŸ‡± Chile</h4>
        Todos los bancos y Pago MÃ³vil.
        <h4>ğŸ‡µğŸ‡ª PerÃº & ğŸ‡¨ğŸ‡´ Colombia</h4>
        BCP, Yape, Nequi, Bancolombia.
    </div>
    <div class="card">
        <h4>ğŸ‡ºğŸ‡¸ Billeteras USD</h4>
        Zelle (Min $50), Zinli, Wally, PanamÃ¡.
    </div>
</div>

<script>
// MATRIZ DE TASAS SEGÃšN TUS TABLAS
const matriz = {
    "COLOMBIA_VENEZUELA": {t: 9.1, o: 'd'},
    "CHILE_VENEZUELA": {t: 0.487, o: 'm'},
    "PERU_VENEZUELA": {t: 126, o: 'm'},
    "DOLAR_VENEZUELA": {t: 365, o: 'm'},
    "VENEZUELA_CHILE": {t: 0.7, o: 'd'},
    "VENEZUELA_COLOMBIA": {t: 6, o: 'm'},
    "VENEZUELA_PERU": {t: 150, o: 'd'},
    "VENEZUELA_DOLAR": {t: 635, o: 'd'},
    "DOLAR_CHILE": {t: 765, o: 'm'},
    "DOLAR_PERU": {t: 2.88, o: 'm'},
    "DOLAR_COLOMBIA": {t: 3160, o: 'm'}
};

function ajustarCampos() {
    const d = document.getElementById('destino').value;
    const wrapper = document.getElementById('wrapper-tipo');
    if (d === "VENEZUELA") {
        wrapper.innerHTML = `<label>Tipo de Cuenta:</label><select id="tipo_cuenta" onchange="validar()"><option value="Corriente">Cuenta Corriente (20 dÃ­gitos)</option><option value="Ahorro">Cuenta de Ahorro (20 dÃ­gitos)</option><option value="Pago MÃ³vil">Pago MÃ³vil (11 dÃ­gitos)</option></select>`;
    } else {
        wrapper.innerHTML = `<label>Tipo de Cuenta:</label><input type="text" id="tipo_cuenta" placeholder="Ej: RUT, CBU, CLABE..." oninput="validar()">`;
    }
    calcular();
}

function calcular() {
    const m = parseFloat(document.getElementById('monto').value) || 0;
    const o = document.getElementById('origen').value;
    const d = document.getElementById('destino').value;
    document.getElementById('moneda-text').innerText = d === "VENEZUELA" ? "BOLÃVARES" : d;
    const config = matriz[`${o}_${d}`];
    if(config) {
        let res = config.o === 'm' ? m * config.t : m / config.t;
        document.getElementById('resultado').innerText = res.toLocaleString('en-US', {minimumFractionDigits: 2});
    } else { document.getElementById('resultado').innerText = m > 0 ? "Consulte Tasa" : "0.00"; }
    validar();
}

function validar() {
    const d = document.getElementById('destino').value;
    const n = document.getElementById('nro_cuenta').value.replace(/\D/g,'');
    const comp = document.getElementById('comprobante').checked;
    const b = document.getElementById('btn-wa');
    const h = document.getElementById('hint');
    const tipo = document.getElementById('tipo_cuenta').value;
    let ok = false;
    if (d === "VENEZUELA") {
        if (tipo === "Pago MÃ³vil") ok = (n.length === 11);
        else ok = (n.length === 20);
        h.innerText = ok ? "" : "âŒ DÃ­gitos incompletos para Venezuela";
    } else { ok = (n.length >= 5 && tipo.length > 2); h.innerText = ""; }
    if(ok && comp && parseFloat(document.getElementById('monto').value) > 0) b.classList.add('btn-active');
    else b.classList.remove('btn-active');
}

function enviar() {
    const v = document.getElementById('vendedor').value.split('|');
    const msg = `*CIERRE DE OPERACIÃ“N*%0A--------------------------%0AğŸ‘¤ ${document.getElementById('nombre').value}%0AğŸ¦ ${document.getElementById('banco').value}%0AğŸ”¢ ${document.getElementById('nro_cuenta').value}%0A%0AğŸ’° *RECIBE:* ${document.getElementById('resultado').innerText} ${document.getElementById('destino').value}%0AğŸ’¸ *PAGA:* ${document.getElementById('monto').value} ${document.getElementById('origen').value}%0AğŸ¤ *VENDEDOR:* ${v[1]}`;
    window.open(`https://wa.me/${v[0]}?text=${msg}`,'_blank');
}
</script>
</body>
</html>
