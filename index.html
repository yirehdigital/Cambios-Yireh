<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambios Yireh | Calculadora Global</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --naranja: #e67e22; --azul: #2c3e50; --gris: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--gris); margin: 0; text-align: center; }
        header { background: var(--naranja); color: white; padding: 25px; border-bottom: 5px solid #d35400; }
        .logo { max-width: 150px; }
        .container { max-width: 600px; margin: 20px auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        label { font-weight: bold; display: block; margin: 15px 0 5px; text-align: left; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; margin-bottom: 10px; box-sizing: border-box; }
        
        /* Estilo para simular banderas circulares */
        .select-wrapper { position: relative; }
        option { font-size: 18px; }

        .resultado-caja { background: #fff9f4; padding: 25px; border-radius: 12px; border: 2px solid var(--naranja); margin: 25px 0; }
        .resultado-label { color: #7f8c8d; font-size: 14px; text-transform: uppercase; font-weight: bold; }
        .resultado-monto { font-size: 36px; font-weight: 900; color: var(--naranja); display: block; margin: 5px 0; }
        
        .btn-whatsapp { background: #27ae60; color: white; padding: 18px; border-radius: 10px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; text-decoration: none; border: none; opacity: 0.4; pointer-events: none; }
        .btn-active { opacity: 1; pointer-events: auto; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3); }
        
        .footer-info { background: white; padding: 20px; border-radius: 10px; margin: 20px auto; max-width: 600px; border: 1px solid #eee; text-align: left; font-size: 13px; }
        .error-hint { color: #e74c3c; font-size: 12px; text-align: left; font-weight: bold; margin-top: -5px; margin-bottom: 10px; }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Cambios Yireh" class="logo">
    <p>"Tu puente de confianza, tu dinero al instante."</p>
</header>

<div class="container">
    <label>Vendedor:</label>
    <select id="vendedor">
        <option value="56957326594|Y40">Y40 Nay MartÃ­nez</option>
        <option value="56974967341|Y32">Y32 JosÃ© MillÃ¡n</option>
        <option value="5841220628361|Y17">Y17 Alba ArÃ©valo</option>
    </select>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div>
            <label>Desde (Tengo):</label>
            <select id="origen" onchange="calcular()">
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="ARGENTINA">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                <option value="MEXICO">ğŸ‡²ğŸ‡½ MÃ©xico (MXN)</option>
                <option value="PANAMA">ğŸ‡µğŸ‡¦ PanamÃ¡ (USD)</option>
                <option value="ECUADOR">ğŸ‡ªğŸ‡¨ Ecuador (USD)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lar/Zelle</option>
            </select>
        </div>
        <div>
            <label>Hacia (Quiero):</label>
            <select id="destino" onchange="calcular()">
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="ARGENTINA">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                <option value="MEXICO">ğŸ‡²ğŸ‡½ MÃ©xico (MXN)</option>
                <option value="PANAMA">ğŸ‡µğŸ‡¦ PanamÃ¡ (USD)</option>
                <option value="ECUADOR">ğŸ‡ªğŸ‡¨ Ecuador (USD)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lares (USD)</option>
            </select>
        </div>
    </div>

    <label>Monto a enviar:</label>
    <input type="number" id="monto" placeholder="0.00" oninput="calcular()">

    <div class="resultado-caja">
        <span class="resultado-label" id="label-destino">Recibes en Venezuela</span>
        <span class="resultado-monto" id="resultado">0.00</span>
        <b style="color: var(--azul)" id="moneda-text">BOLÃVARES</b>
    </div>

    <h3>Datos del Receptor</h3>
    <input type="text" id="nombre" placeholder="Nombre y Apellido">
    <input type="text" id="cedula" placeholder="CÃ©dula / ID">
    <input type="text" id="banco" placeholder="Banco">
    <select id="tipo_cuenta" onchange="validar()">
        <option value="Corriente">Cuenta Corriente (20 dÃ­gitos)</option>
        <option value="Ahorro">Cuenta de Ahorro (20 dÃ­gitos)</option>
        <option value="Pago MÃ³vil">Pago MÃ³vil (11 dÃ­gitos)</option>
    </select>
    <input type="text" id="nro_cuenta" placeholder="NÃºmero de cuenta o telÃ©fono" oninput="validar()">
    <span id="hint" class="error-hint"></span>

    <div style="background: #fff4e5; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 13px;">
        <input type="checkbox" id="comprobante" onchange="validar()"> 
        <b>Confirmo que tengo el comprobante para adjuntar.</b>
    </div>

    <button id="btn-wa" class="btn-whatsapp" onclick="enviar()">
        <i class="fab fa-whatsapp"></i> CONFIRMAR OPERACIÃ“N
    </button>
</div>

<div class="footer-info">
    <h4 style="color:var(--naranja); margin-top:0;">MÃ­nimos y Bancos</h4>
    <p><b>ğŸ‡µğŸ‡¦ PanamÃ¡:</b> Todos los bancos (Min $20). | <b>ğŸ‡¦ğŸ‡· Argentina:</b> Brubank, M.Pago, UalÃ¡ (Min $20).</p>
    <p><b>ğŸ‡²ğŸ‡½ MÃ©xico:</b> BBVA, Banamex, M.Pago (Min $20). | <b>ğŸ‡ªğŸ‡¨ Ecuador:</b> Pichincha, Guayaquil (Min $20).</p>
</div>

<script>
const matriz = {
    "COLOMBIA_VENEZUELA": {t: 9.1, o: 'd'},
    "CHILE_VENEZUELA": {t: 0.487, o: 'm'},
    "PERU_VENEZUELA": {t: 126, o: 'm'},
    "DOLAR_VENEZUELA": {t: 365, o: 'm'},
    "VENEZUELA_CHILE": {t: 0.7, o: 'd'},
    "VENEZUELA_COLOMBIA": {t: 6, o: 'm'},
    "VENEZUELA_PERU": {t: 150, o: 'd'},
    "VENEZUELA_DOLAR": {t: 635, o: 'd'},
    // Resto de combinaciones basadas en tus tablas...
    "DOLAR_CHILE": {t: 765, o: 'm'}, "DOLAR_PERU": {t: 2.88, o: 'm'}, "DOLAR_COLOMBIA": {t: 3160, o: 'm'}
};

function calcular() {
    const m = parseFloat(document.getElementById('monto').value) || 0;
    const o = document.getElementById('origen').value;
    const d = document.getElementById('destino').value;
    
    document.getElementById('label-destino').innerText = `Recibes en ${d}`;
    document.getElementById('moneda-text').innerText = d === "VENEZUELA" ? "BOLÃVARES" : d;

    if(o === d) { document.getElementById('resultado').innerText = m.toFixed(2); return; }

    const config = matriz[`${o}_${d}`];
    if(config) {
        let res = config.o === 'm' ? m * config.t : m / config.t;
        // FORMATO: Comas para miles, Punto para decimales
        document.getElementById('resultado').innerText = res.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
    } else {
        document.getElementById('resultado').innerText = "Consulte Tasa";
    }
    validar();
}

function validar() {
    const t = document.getElementById('tipo_cuenta').value;
    const n = document.getElementById('nro_cuenta').value.replace(/\D/g,'');
    const comp = document.getElementById('comprobante').checked;
    const b = document.getElementById('btn-wa');
    const h = document.getElementById('hint');
    
    let ok = false;
    if(t === "Pago MÃ³vil") {
        ok = (n.length === 11);
        h.innerText = ok ? "" : "âŒ Debe tener 11 dÃ­gitos";
    } else {
        ok = (n.length === 20);
        h.innerText = ok ? "" : "âŒ Debe tener 20 dÃ­gitos";
    }

    if(ok && comp && parseFloat(document.getElementById('monto').value) > 0) {
        b.classList.add('btn-active');
    } else {
        b.classList.remove('btn-active');
    }
}

function enviar() {
    const v = document.getElementById('vendedor').value.split('|');
    const msg = `*FICHA DE OPERACIÃ“N*%0A--------------------------%0AğŸ‘¤ ${document.getElementById('nombre').value}%0AğŸ†” ${document.getElementById('cedula').value}%0AğŸ¦ ${document.getElementById('banco').value}%0AğŸ”¢ ${document.getElementById('nro_cuenta').value}%0A%0AğŸ’° *RECIBE:* ${document.getElementById('resultado').innerText} ${document.getElementById('destino').value}%0AğŸ’¸ *PAGA:* ${document.getElementById('monto').value} ${document.getElementById('origen').value}%0AğŸ¤ *VENDEDOR:* ${v[1]}`;
    window.open(`https://wa.me/${v[0]}?text=${msg}`,'_blank');
}
</script>
</body>
</html>
