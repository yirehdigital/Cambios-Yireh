<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambios Yireh | Calculadora Global</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --naranja: #e67e22; --naranja-dark: #d35400; --azul: #2c3e50; --gris: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--gris); margin: 0; text-align: center; }
        header { background: var(--naranja); color: white; padding: 25px; border-bottom: 5px solid var(--naranja-dark); }
        .logo { max-width: 150px; margin-bottom: 5px; }
        .container { max-width: 600px; margin: 20px auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        label { font-weight: bold; display: block; margin: 15px 0 5px; text-align: left; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; margin-bottom: 10px; box-sizing: border-box; }
        
        /* Resultado con formato profesional */
        .resultado-caja { background: #fff9f4; padding: 20px; border-radius: 10px; border: 2px solid var(--naranja); margin: 20px 0; }
        .resultado-monto { font-size: 34px; font-weight: 800; color: var(--naranja); display: block; }
        
        /* BotÃ³n de WhatsApp validado */
        .btn-whatsapp { background: #27ae60; color: white; padding: 18px; border-radius: 8px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; text-decoration: none; border: none; opacity: 0.3; pointer-events: none; transition: 0.3s; }
        .btn-active { opacity: 1 !important; pointer-events: auto !important; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); }
        
        .footer-info { background: white; padding: 20px; border-radius: 10px; margin: 20px auto; max-width: 600px; border: 1px solid #eee; text-align: left; font-size: 13px; line-height: 1.6; }
        .grid-footer { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .error-hint { color: #e74c3c; font-size: 12px; text-align: left; font-weight: bold; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Cambios Yireh" class="logo">
    <br><i>"Tu puente de confianza, tu dinero al instante."</i>
</header>

<div class="container">
    <label>Vendedor:</label>
    <select id="vendedor">
        <option value="56957326594|Y40">Y40 Nay MartÃ­nez</option>
        <option value="56974967341|Y32">Y32 JosÃ© MillÃ¡n</option>
        <option value="5841220628361|Y17">Y17 Alba ArÃ©valo</option>
    </select>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div>
            <label>Desde (Tengo):</label>
            <select id="origen" onchange="calcular()">
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="ARGENTINA">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                <option value="MEXICO">ğŸ‡²ğŸ‡½ MÃ©xico (MXN)</option>
                <option value="PANAMA">ğŸ‡µğŸ‡¦ PanamÃ¡ (USD)</option>
                <option value="ECUADOR">ğŸ‡ªğŸ‡¨ Ecuador (USD)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lar/Zelle</option>
            </select>
        </div>
        <div>
            <label>Hacia (Quiero):</label>
            <select id="destino" onchange="calcular()">
                <option value="VENEZUELA">ğŸ‡»ğŸ‡ª Venezuela (VES)</option>
                <option value="CHILE">ğŸ‡¨ğŸ‡± Chile (CLP)</option>
                <option value="COLOMBIA">ğŸ‡¨ğŸ‡´ Colombia (COP)</option>
                <option value="PERU">ğŸ‡µğŸ‡ª PerÃº (PEN)</option>
                <option value="ARGENTINA">ğŸ‡¦ğŸ‡· Argentina (ARS)</option>
                <option value="MEXICO">ğŸ‡²ğŸ‡½ MÃ©xico (MXN)</option>
                <option value="PANAMA">ğŸ‡µğŸ‡¦ PanamÃ¡ (USD)</option>
                <option value="ECUADOR">ğŸ‡ªğŸ‡¨ Ecuador (USD)</option>
                <option value="DOLAR">ğŸ‡ºğŸ‡¸ DÃ³lares (USD)</option>
            </select>
        </div>
    </div>

    <label>Monto a enviar:</label>
    <input type="number" id="monto" placeholder="0.00" oninput="calcular()">

    <div class="resultado-caja">
        <span id="label-res" style="color:#7f8c8d; font-size:12px; font-weight:bold; text-transform:uppercase;">Recibes aproximadamente</span>
        <span class="resultado-monto" id="resultado">0.00</span>
        <b id="moneda-text" style="color:var(--azul)">BOLÃVARES</b>
    </div>

    <h3>Datos del Receptor</h3>
    <input type="text" id="nombre" placeholder="Nombre y Apellido">
    <input type="text" id="cedula" placeholder="CÃ©dula / ID">
    <input type="text" id="banco" placeholder="Banco">
    <select id="tipo_cuenta" onchange="validar()">
        <option value="Corriente">Cuenta Corriente (20 dÃ­gitos)</option>
        <option value="Ahorro">Cuenta de Ahorro (20 dÃ­gitos)</option>
        <option value="Pago MÃ³vil">Pago MÃ³vil (11 dÃ­gitos)</option>
    </select>
    <input type="text" id="nro_cuenta" placeholder="NÃºmero de cuenta o telÃ©fono" oninput="validar()">
    <span id="hint" class="error-hint"></span>

    <div style="background: #fff4e5; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; text-align: left;">
        <input type="checkbox" id="comprobante" onchange="validar()"> 
        <b>ConfirmaciÃ³n:</b> Ya tengo mi comprobante listo para adjuntar al vendedor.
    </div>

    <button id="btn-wa" class="btn-whatsapp" onclick="enviar()">
        <i class="fab fa-whatsapp"></i> CONFIRMAR OPERACIÃ“N
    </button>
</div>

<div class="footer-info">
    <h4 style="color:var(--naranja); margin-top:0; border-bottom: 1px solid #eee; padding-bottom: 5px;">ğŸ“ Bancos Disponibles y MÃ­nimos</h4>
    <div class="grid-footer">
        <div>
            <b>ğŸ‡»ğŸ‡ª VENEZUELA:</b> Todos los bancos y Pago MÃ³vil.<br>
            <b>ğŸ‡¨ğŸ‡± CHILE:</b> Todos los bancos de Chile.<br>
            <b>ğŸ‡µğŸ‡ª PERU:</b> BCP, Yape, Interbancaria.<br>
            <b>ğŸ‡¨ğŸ‡´ COLOMBIA:</b> Nequi, Bancolombia, Transfiya, Llave Bre-B.
        </div>
        <div>
            <b>ğŸ‡µğŸ‡¦ PANAMÃ:</b> Banco General, Yappi, Banistmo, Banesco (Min $20).<br>
            <b>ğŸ‡¦ğŸ‡· ARGENTINA:</b> MercadoPago, UalÃ¡, Brubank (Min $20).<br>
            <b>ğŸ‡²ğŸ‡½ MÃ‰XICO:</b> BBVA, STP, MercadoPago, Citibanamex (Min $20).<br>
            <b>ğŸ‡ªğŸ‡¨ ECUADOR:</b> Pichincha, Guayaquil, Produbanco (Min $20).
        </div>
    </div>
    <div style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px; text-align: center;">
        <b>ğŸ‡ºğŸ‡¸ USD:</b> Zelle (MÃ­nimo $50) | Zinli / Wally (MÃ­nimo $20).
    </div>
</div>

<script>
// MATRIZ DE TASAS COMPLETA Y CORREGIDA
const matriz = {
    "COLOMBIA_VENEZUELA": {t: 9.1, o: 'd'}, // DIVIDE
    "CHILE_VENEZUELA": {t: 0.487, o: 'm'},
    "PERU_VENEZUELA": {t: 126, o: 'm'},
    "DOLAR_VENEZUELA": {t: 365, o: 'm'},
    "VENEZUELA_CHILE": {t: 0.7, o: 'd'},
    "VENEZUELA_COLOMBIA": {t: 6, o: 'm'},
    "VENEZUELA_PERU": {t: 150, o: 'd'},
    "VENEZUELA_DOLAR": {t: 635, o: 'd'},
    "DOLAR_CHILE": {t: 765, o: 'm'},
    "DOLAR_PERU": {t: 2.88, o: 'm'},
    "DOLAR_COLOMBIA": {t: 3160, o: 'm'}
};

function calcular() {
    const m = parseFloat(document.getElementById('monto').value) || 0;
    const o = document.getElementById('origen').value;
    const d = document.getElementById('destino').value;
    
    document.getElementById('moneda-text').innerText = d === "VENEZUELA" ? "BOLÃVARES" : d;

    if(o === d) { document.getElementById('resultado').innerText = m.toFixed(2); return; }

    const config = matriz[`${o}_${d}`];
    if(config) {
        let res = config.o === 'm' ? m * config.t : m / config.t;
        // Formato: 5,494.51 (Comas para miles, Punto para decimales)
        document.getElementById('resultado').innerText = res.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
    } else {
        document.getElementById('resultado').innerText = "Consulte Tasa";
    }
    validar();
}

function validar() {
    const t = document.getElementById('tipo_cuenta').value;
    const n = document.getElementById('nro_cuenta').value.replace(/\D/g,'');
    const comp = document.getElementById('comprobante').checked;
    const b = document.getElementById('btn-wa');
    const h = document.getElementById('hint');
    const monto = parseFloat(document.getElementById('monto').value) || 0;
    
    let ok = false;
    if(t === "Pago MÃ³vil") {
        ok = (n.length === 11);
        h.innerText = ok ? "" : "âŒ Pago MÃ³vil debe tener 11 dÃ­gitos";
    } else {
        ok = (n.length === 20);
        h.innerText = ok ? "" : "âŒ Cuenta debe tener 20 dÃ­gitos";
    }

    if(ok && comp && monto > 0) {
        b.classList.add('btn-active');
    } else {
        b.classList.remove('btn-active');
    }
}

function enviar() {
    const v = document.getElementById('vendedor').value.split('|');
    const msg = `*FICHA DE OPERACIÃ“N*%0A--------------------------%0AğŸ‘¤ ${document.getElementById('nombre').value}%0AğŸ†” ${document.getElementById('cedula').value}%0AğŸ¦ ${document.getElementById('banco').value}%0AğŸ”¢ ${document.getElementById('nro_cuenta').value}%0A%0AğŸ’° *RECIBE:* ${document.getElementById('resultado').innerText} ${document.getElementById('destino').value}%0AğŸ’¸ *PAGA:* ${document.getElementById('monto').value} ${document.getElementById('origen').value}%0AğŸ¤ *VENDEDOR:* ${v[1]}`;
    window.open(`https://wa.me/${v[0]}?text=${msg}`,'_blank');
}
</script>
</body>
</html>
